# Real Estate Agent Automation Platform\n\nProduction-ready, multi-tenant automation for speed-to-lead, follow-up, CRM sync, and booking automation.\n\n## Stack\n- Frontend: Next.js (TypeScript)\n- Backend: NestJS (TypeScript)\n- Database: PostgreSQL\n- Queue: Redis + BullMQ\n- Auth: NextAuth (frontend), JWT/RBAC (backend placeholder)\n- SMS: Twilio (stub)\n- Email: SendGrid (stub) + Gmail OAuth placeholder\n- Calendar: Google Calendar integration stub\n- CRM: HubSpot + Follow Up Boss adapters with extensible interface\n- Observability: Sentry, health endpoint, structured logs\n\n## Monorepo\n- `frontend/` Next.js app for onboarding, inbox, reporting\n- `backend/` NestJS API, sequences, CRM connectors\n- `docker-compose.yml` Postgres + Redis + app scaffolding\n\n## Getting started\n1. Copy envs: `cp backend/.env.example backend/.env` and `cp frontend/.env.example frontend/.env`.\n2. Run services: `docker compose up --build`.\n3. Run migrations: `psql -h localhost -U postgres -d real_estate -f backend/migrations/001-init.sql`.\n4. Seed data: `cd backend && npm install && npm run seed`.\n5. Frontend dev: `cd frontend && npm install && npm run dev` (API at `http://localhost:4000/api`).\n\n## API\n- `POST /api/leads/intake/:tenantId` – JSON lead intake, dedupe by email/phone, queues instant SMS/email and sequences.\n- `GET /api/health` – health check.\n\n## Sequences & Messaging\n- Config-driven sequences stored in DB (lead type + temperature).\n- BullMQ queues for instant SMS/email and follow-up steps; worker stub is ready for provider implementations.\n- Opt-out and reply stop are handled by the sequence service hook stubs.\n\n## CRM Connectors\n- Adapters live in `backend/src/modules/crm/`. Implement `syncLead` per provider. Mock implementations log actions for local dev.\n\n## Onboarding & Admin\n- Onboarding checklist UI at `/onboarding`.\n- Inbox UI at `/inbox` with AI suggestion interface stub (`frontend/src/lib/ai/suggestions.ts`).\n- Reporting dashboard at `/reporting`.\n\n## Development notes\n- Entities and migrations define multi-tenant tables with unique constraints per tenant for dedupe.\n- Queue service provides BullMQ setup; extend worker handler for retries and DLQ.\n- Calendar service stub demonstrates booking event creation.\n- Seed script creates demo tenant, admin, and buyer warm sequence.\n\n## Testing\n- Backend unit tests: `cd backend && npm test` (sample coverage for lead intake dedupe).\n\n## Adding a new CRM connector\n1. Create an adapter implementing `syncLead` in `backend/src/modules/crm/`.\n2. Register it in `CrmService.adapters` map.\n3. Add configuration/env keys and wiring to call adapter on lead events.\n\n## Onboarding a tenant\n- Create tenant with timezone and quiet hours.\n- Connect Twilio/SendGrid/Calendar/CRM via credentials table (encrypted at rest in production via KMS).\n- Define sequences per lead type + temperature.\n- Configure lead routing rules and invite agents with roles (admin, agent, team_lead).\n\n## Reliability & Security\n- Health checks via Terminus.\n- Input validation via class-validator DTOs.\n- Sentry integration hook in `src/main.ts`.\n- TODO: add webhook signing, encryption for credentials, RBAC guards, and audit log triggers.\n*** End Patch"ưở to=functions.apply_patch code## Commentрисида JSON Multi കൊണ്ട!]]## JSON Hjson]])
